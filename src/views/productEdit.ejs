<!DOCTYPE html>
<html lang="en">
    <%- include('partials/head') %>

    <body class="productAdd">
        <%- include('partials/header') %>

        <main class="container">
            <div class="row">
                <div class="col-12 col-md-8 mx-auto mt-5">
                    <div class="card shadow">
                        <div class="card-header">
                            <div class="d-flex justify-content-between">
                                <nav>
                                    <ol class="breadcrumb">
                                      <li class="breadcrumb-item"><a class="text-dark" href="/">Home</a></li>
                                      <li class="breadcrumb-item"><a class="text-dark" href="/admin">Admin</a></li>
                                      <li class="breadcrumb-item fw-bold">Editando: <%= title %></li>
                                    </ol>
                                  </nav>

                            </div>
                        </div>
                        <div class="card-body">
                            <form
                                action="/products/update/<%= id %>?_method=PUT"
                                method="POST" class="row"
                                enctype="multipart/form-data">
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="title" class="form-label">Título</label>
                                    <input type="text"  class="form-control <%= locals.errors && (errors.title && 'is-invalid') %>"
                                        id="title"
                                        placeholder="Título del producto"
                                        name="title" value="<%= title %>">
                                        <small class="text-danger ms-2">
                                            <%= locals.errors && (errors.title && errors.title.msg) %>
                                          </small>
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="categoryId" class="form-label">Categoría</label>
                                    <select class="form-select"
                                        aria-label="Default select example"
                                        name="categoryId"
                                        id="categoryId">
                                        <% categories.forEach(category=> { %>
                                        <option <%=category.id===categoryId &&
                                            'selected' %> value="<%= category.id
                                            %>
                                            "><%= category.name %>
                                        </option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div class="col-12 col-md-4 mb-3">
                                    <label for="price" class="form-label">Precio</label>
                                    <input type="number" class="form-control <%= locals.errors && (errors.price && 'is-invalid') %>"
                                        id="price" name="price"
                                        value="<%= price %>">
                                        <small class="text-danger ms-2">
                                            <%= locals.errors && (errors.price && errors.price.msg) %>
                                          </small>
                      
                                </div>
                                <div class="col-12 col-md-4 mb-3">
                                    <label for="discount" class="form-label">Descuento</label>
                                    <input type="number" class="form-control"
                                        id="discount" name="discount"
                                        value="<%= discount %>">
                                </div>
                                <div class="col-12 col-md-4 mb-3">
                                    <label for="sectionId" class="form-label">Sección</label>
                                    <select class="form-select"
                                        aria-label="Default select example"
                                        name="sectionId"
                                        id="sectionId">
                                        <% sections.forEach(section=> { %>
                                        <option value="<%= section.id %>" <%=sectionId===section.id
                                            && 'selected' %>><%=
                                            section.name %>
                                        </option>
                                        <% }) %>
                                    </select>
                                </div>
                                <div class="col-12 mb-3">
                                    <label for="description" class="form-label">Descripción</label>
                                    <textarea name="description"
                                        id="description"  class="form-control  <%= locals.errors && (errors.description && 'is-invalid') %>"
                                        style="resize: none;"><%= description %></textarea>
                                        <small class="text-danger ms-2">
                                            <%= locals.errors && (errors.description && errors.description.msg) %>
                                          </small>
                                </div>
                                <div class="col-12 mb-3">
                                    <div class="d-flex justify-content-between">
                                        <% images.forEach(image => { %>
                                            <img
                                            src="/img/products/<%= image.file%>"
                                            width="32%"
                                            alt>
                                        <% }) %>
                                    </div>
                                    
                                   
                                </div>
                                <div
                                    class="col-12 d-flex justify-content-end gap-2 ">
                                    <label for="image" class="btn btn-secondary">Cambiar imagen
                                        principal</label>
                                    <input type="file" name="image" id="image"
                                        hidden />
                                    <label for="images"
                                        class="btn btn-secondary">Cambiar imágenes</label>
                                    <input type="file" multiple name="images"
                                        id="images" hidden />
                                    <button class="btn btn-dark">Guardar cambios</button>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </main>
        <%- include('partials/footer') %>
        <%- include('partials/scripts') %>

    </body>

</html>