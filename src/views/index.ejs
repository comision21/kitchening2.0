<!DOCTYPE html>
<html lang="en">

<%- include('partials/head') %>

    <body class="home">
        <%- include('partials/header') %>

            <main class="home__main">
                <div class="home__main__section--banner">
                    <div class="swiper mySwiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide"><img src="/img/banner/image1.jpg" alt=""></div>
                            <div class="swiper-slide"><img src="/img/banner/image2.jpeg" alt=""></div>
                            <div class="swiper-slide"><img src="/img/banner/image3.jpeg" alt=""></div>
                            <div class="swiper-slide"><img src="/img/banner/image5.webp" alt=""></div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                </div>
                <aside class="home__main__aside">
                    <p  style="font-size:30px;cursor:pointer; margin: 20px 0;" onclick="openNav()">&#9776; Categor√≠as</p>
                    <div id="mySidenav" class="sidenav">
                        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                        <% categories.forEach(category => { %>
                            <a href="#"><%= category.name %></a>

                        <% }) %>
                      </div>
                </aside>
                <div class="row">

                    <% products.forEach(({title, price, discount, description, id, images,section},index)=> { %>
                        <div class="col-12 col-md-6 col-lg-4 mb-3">
                            <a href="/products/detail/<%= id %>">
                        <div class="card home__main__section__article">
                            <div class="home__main__section__article--box ">
                                <div >
                                    <img class="home__main__section__article--image"
                                    src="/img/products/<%= images.length ? images.find(image => image.main).file : null %>">
                                </div>
                              
                               
                                <div class="card-body d-flex flex-column justify-content-between">
                                  <h5 class="card-title"> <%= title %></h5>
                                
                                  <% if (discount) { %>
                                    <div class="d-flex align-items-center gap-2">
                                        <small class="text-muted text-decoration-line-through fs-4">$<%= price %></small>
                                        <p class="card-text  fs-2">$<%= price - (price * discount / 100) %></p>
                                    </div>
                                    
                                  <% }else{ %>
                                    <p class="card-text  fs-2">$<%= price - (price * discount / 100) %></p>

                                  <% } %>
                                    <button onclick="event.preventDefault(); addItemToCart(1,'<%=id%>')" class="btn btn-sm btn-outline-dark">Agregar al carrito</button>
                                </div>
                           
                            </div>
                          </div>
                        </a>
                        </div>
                        <% }) %>


                </div>
                <section class="carousel_ensaladas">
                    <div class="swiper mySwiper2">
                        <div class="swiper-wrapper">

                            <% productsCarousel.forEach(({id, image}) => { %>
                                <div class="swiper-slide">
                                    <div class="card">
                                        <a href="/detalle-product/<%= id %>"><img class="card-img-top"
                                                src="/img/products/<%= image %>" alt=""></a>
                                        <div class="card-body">
    
                                            <p class="card-title">Ensalada tanto...</p>
    
                                        </div>
                                    </div>
    
    
                                </div>
                            <% }) %>
                        
                          
                    
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>
                </section>
                <a class="home__main--whatsapp" href=""><img width="50px" src="/img/whatsapp-icon.png" alt=""></a>
            </main>

            <%- include('partials/footer') %>
                <%- include('partials/scripts') %>
                <script>
                    function openNav() {
                      document.getElementById("mySidenav").style.width = "320px";
                      document.getElementById("main").style.marginLeft = "250px";
                    }
                    
                    function closeNav() {
                      document.getElementById("mySidenav").style.width = "0";
                      document.getElementById("main").style.marginLeft= "0";
                    }
                    </script>


    </body>

</html>